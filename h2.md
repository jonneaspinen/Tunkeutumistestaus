# Totally legit sertifigate

### Osa 1 | Lue ja tiivistä
- SQL injection:  
  - Haavoittuvuus webissä, joka antaa hyökkääjän puuttua tietokannan toimintaan. Hyökkääjä pääsee käsiksi normaalisti ulottumattomissa olevaan mahdollisesti arkaluontoiseenkin dataan. Hyökkäystä laajentamalla voidaan myös kuormittaa serveriä.
  - Hyökkäys voi tapahtua esimerkiksi syöttämällä URL-osoitteeseen tai kirjautumis-kenttään SQL-kyselyä muokkaavaa tekstiä.
  - Kaksi viivaa ```--```tekee SQL-kielessä kaikista sen jälkeisistä merkeistä osan kommenttia, jolloin niiden merkitys kyselyssä poistuu. Tällä tavoin kyselystä voidaan poistaa tärkeitäkin osia.
  - Syöttämällä jatkoksi ```UNION```, voidaan lisätä toinen ```SELECT``` kysely.
  - Tietokannoilla on eroja, jotka voivat vaikuttaa siihen miten hyökkäyksiä tehdään.
  - Edistyneempi SQL-hyökkäys on sellainen, jossa tietokantaan aluksi syötetään tietoa, jota järjestelmä ei koe haitalliseksi, mutta hyökkäys tapahtuukin siinä vaiheessa, kun kyseistä tietoa haetaan tai päivitetään.
  - SQL-hyökkästä vastaan voidaan suojatua esimerkiksi lisäämällä koodiin välivaihe, joka valmistelee kyselyn sen sijaan, että käyttäjän syöttö menee suoraan kyselyyn.

  <sub>Lähde: [PortSwigger artikkeli - SQL Injection](https://portswigger.net/web-security/sql-injection)</sub>
<br></br>

- Cross-site scripting (XSS):
  - Webbihaavoittuvuus, jota hyödyntämällä hyökkääjä voi yleisimmin esimerkiksi naamioitua toiseksi käyttäjäksi, samalla päästen käsiksi hänen tietoihin. Joissain tapahtuksissa voidaan päästä myös syvemmin käsiksi järjestelmään, jos uhri käyttäjällä on eritysoikeuksia.
  - Helpoin tapa testata haavoittuvuus on suorittaa selaimessa JavaScript koodia. Yleisin tapa on käyttää ```Alert()```.
  - Suoritettavan koodin voi syöttää esimerkiksi HTTPS pyynnön mukana ```<script> hyökkäys </script>```.
  - URL-osoite ja syöttökentät voivat olla haavoittuvaisia tälläiselle hyökkäykselle.
  - Käyttämällä CSP (Content Security Policy) selainmekanismi voi heikentää tälläisten hyökkäysten toimintaa.
  - Hyökkäystä vastaan voi suojautua filtteröimällä syötteet, "enkoodaamalla" eli muuttamalla syötteen eri muotoon, spesifioimalla aina kaiken sisällön tyypin ja käyttämällä CSP:tä.

  <sub>Lähde: [PortSwigger artikkeli - Cross-site scripting](https://portswigger.net/web-security/cross-site-scripting)</sub>

---

### Osa 2 | Murtautumisharjoittelua

a) ZAP! Asenna ZAP välimiesproxy ja näytä, että pystyt sieppaamaan liikennettä selaimesta.

b) Totally Legit Sertificate. Asenna ZAP:n generoima CA-sertifikaatti selaimeen ja osoita testillä, että pystyt sieppaamaan HTTPS-salakirjoitettua liikennettä.

c) Intercept. Pysäytä hakupyyntö, muokkaa sitä ja päästä se palvelimelle.

d) Vuohi. Asenna WebGoat ja kokeile, että pääset kirjautumaan sisään.

e) Vauvavuohi. Ratkaise WebGoatista tehtävät "HTTP Basics" ja "Developer tools".

f) SELECT * FROM student. Ratkaise SQLZoo:sta: 0 SELECT basics, 2 SELECT from World kohdat 1-5.

g) Ratkaise WebGoatista:
- A1 Injection (intro)
- A2 Broken authentication:
  - Authentication bypasses: 2 2FA Password Reset
- A3 Sensitive data exposure
  - Insecure Login: 2 Let's try
- A7 Cross Site Scripting (XSS): Cross site scripting
  - 2 What is XSS?
  - 7 Try It! Reflected XSS
- A8:2013 Request Forgeries:
  - Cross-Site Request Forgeries
  - 3 "Basic Get CSRF Exercise"
            4 "Post a review on someone else’s behalf".
