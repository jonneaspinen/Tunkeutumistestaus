# The Box

### Osa 1 | Katso ja tiivistä | [IppSec- HackTheBox - Shoppy](https://www.youtube.com/watch?v=AJc53DUdt1M)

#### Tiivistelmä
- IppSec lähti videossa murtautumaan kohteeseen aloittaen komennolla

```sudo nmap -sC -sV -oA nmap/shoppy <ip>```

- Selvitin tähän väliin mitä komennon eri flagit tarkoittavat, avasin manuaalin ( ```man nmap``` ) ja hain sieltä komennon eri osia ( ```/<hakusana>``` ).
Käytin apuna myös ```nmap -help``` komentoa.

- Komennon osat selkeytettynä:
  - ```nmap```: skannaa kohdeverkon
  - ```-sC```: suorittaa scripti skannauksen käyttäen oletuslistaa
  - ```-sV```: selvittää palveluiden versiot
  - ```-oA nmap/shoppy```: vissiinkin tallentaa skannauksen tulokset kaikissa formaateissa nmap/shoppy hakemistoon.

- Kohteessa oli auki 2 porttia, joista toinen ohjasi nettisivulle.
- Siellä päästiin kirjautumaan admin-sivulle syöttämällä tunnukseksi ```admin'||'1'='1```.
- Admin sivulta saatiin myös muiden käyttäjien tiedot syöttämällä sama injektio käyttäjä-hakukenttään.
- Sivulla ei pystynyt tekemään muuta joten IppSec etsi mahdollisia aliverkkotunnuksia fuzzerilla ja löysi hyökkäyskohteen kommunikaatiokanavan.
- Sieltä löytyi taas uudet tunnukset joilla päästiin kirjautumaan SSH:n kautta.
- Kyseisellä käyttäjällä oli oikeudet password-manageriin, joka kuitenkin tarvitse master salasanan.
- Master salasana selvisi käyttäen ```strings```, joka tulosti kohdetiedoston kaikki mahdolliset tulosteet.
- Kun se oli selvillä päästiin kirjautumaan password-manageriin, josta löytyi taas uudet tunnukset.
- Niillä tunnuksilla päästiin käyttäjälle, jolla oli oikeudet dockeriin, jossa päästiin käsiksi roottiin.
#### Pidempi tiivistelmä
- [h3-osa1-extra](../main/h3-osa1-extra.md)

---

### Osa 2 | Murtautumisharjoittelua

#### a) We like to shop. Ratkaise Portswigger Academyn "Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data".
#### b) HTB. Tee HackTheBox.com tunnus. Avaa OpenVPN-yhteys "Starting Point" verkkoon. Estä tunnelin ulkopuolinen liikenne eli liikenne oikeaan Internettiin. Testaa, että normaali Internet-liikenteesi on estetty.
#### c) Meow. Käynnistä "Starting point": "Meow". Tallenna ruutukaappaus sivusta, jossa näkyy koneen osoite ja tunkeutumistehtäviä. Porttiskannaa kone ja analysoi tulokset. Suorita HTB:n antamat tehtävät. Raportoi normaalisti, "Starting point" -koneista saa julkaista läpikävelyohjeita.
#### d) Fawn. Ratkaise Fawn. (HTB Starting point)
#### e) Dancing. Ratkaise Dancing. (HTB Starting point)
