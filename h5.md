# Final countdown

### Lue ja tiivistä

- Cracking passwords with hashcat
  - Hashcatin asennus
  - Valitse jokin sanalista, kuten esimerkiksi [Rockyou]([https://terokarvinen.com/2022/cracking-passwords-with-hashcat/](https://github.com/danielmiessler/SecLists/blob/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz)), joka sisältää 14 miljoonaa sanaa.
  - Salaustyypin selvitys ```hashid -m <hash>``` - analysoi hashing ja selvittää todennäköisimmän salaustavan (MD2, MD5 yms.)
  - Sitten murtautuminen:
  ```$ hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved```
    - ```-m 0```: salauksen tyyppi.
    - ```-o solved```: tallentaa vastauksen uuteen "solved" tiedostoon.


 <sub>Lähde: [Terokarvinen.com](https://terokarvinen.com/2022/cracking-passwords-with-hashcat/)</sub>
<br></br>

- Crack file password with John
  - John the Ripper voi purkaa monien eri tiedostotyyppien salauksia.
  - Ennen asennusta hyvä katsoa, että on kaikki tarvittavat ohjelmistot.
  - John the Ripper täytyy compilaa.
  - Esimerkki käytöstä:
    - ```zip2john```, jolla selvitetään zip-tiedoston hash.
    - Hash voidaan purkaa ```john <hash>```
    
<sub>Lähde: [Terokarvinen.com](https://terokarvinen.com/2023/crack-file-password-with-john/)</sub>
<br></br>

- Fuzz URLs with ffuf
  - Ffuf asennus
  ```wget https://github.com/ffuf/ffuf/releases/download/v2.0.0/ffuf_2.0.0_linux_amd64.tar.gz```
  
  ```tar -xf ffuf_2.0.0_linux_amd64.tar.gz```
  - ```./ffuf``` näyttää kaikki parametrit.
  - Hankitaan jokin sanalista.
  - Käytetään komennolla:
  ```./ffuf -w <sanalista> -u <kohde URL>/FUZZ```, joka testaa sanalistan sanoja "/fuzz" tilalle ja raportoi mitä saa vastauksena (esim. localhost:8080/secret)
  - Vastauksia voi olla paljon, mutta monet niistä on tyhjiä, vaikka HTTP status olisikin OK.
  - Voidaan suodattaa nämä pois esimerkiksi
  ```./ffuf -w <sanalista> -u <URL>/FUZZ -fs 132```, jossa ```-fs 132``` suodattaa pois kaikki vastaukset, joissa sisältöä on alle 132 ASCII merkkiä.

<sub>Lähde: [Terokarvinen.com](https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/)</sub>
<br></br>

---

### Osa 2 | Murtautumisharjoittelua

#### a) Asenna Hashcat ja testaa sen toiminta murtamalla esimerkkisalasana
#### b) Salainen, mutta ei multa. Ratkaise dirfuzt-1 artikkelista Karvinen 2023: [Find Hidden Web Directories - Fuzz URLs with ffuf](https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/)
- Asennetaan harjoitusmaali "dirfuzt-0".
  - Muutetaan oikeudet ```chmod u+x dirfuzt-0```.
  - Käynnistetään harjoitusmaali ```./dirfuzt-0```.


#### c) Asenna John the Ripper ja testaa sen toiminta murtamalla jonkin esimerkkitiedoston salasana.
- Asennetaan Micro, bash-completion, git, build-essential, libssl-dev, zlib1g, zlib1g-dev, zlib-gst, libbz2-1.0, libbz2-dev ja atoolzip
```$ sudo apt-get -y install micro bash-completion git build-essential libssl-dev zlib1g zlib1g-dev zlib-gst libbz2-1.0 libbz2-dev atool zip wget```
- John the Ripperin asennus (lataus ja compile):
  - Git clone
  - Navigointi john/src hakemistoon, jossa suoritetaan configure ```./configure```. Tämä valmistelee Make-tiedoston ```make``` -komentoa varten.
  - ```make -s clean && make -sj4``` compilaa Johnin.
- Tehdään harjoitus, yritetään avata "tero.zip".
- Hash uuteen tiedostoon:
```zip2john tero.zip >tero.zip.hash```
- Murtautuminen:
```john tero.zip.hash ```
- Salasana selvillä ("butterfly"):
  
  ![image](https://github.com/jonneaspinen/Tunkeutumistestaus/assets/89645611/60d165c5-2afb-4b05-b6fe-19d873c05e41)
  ![image](https://github.com/jonneaspinen/Tunkeutumistestaus/assets/89645611/484f982c-8b8c-4a64-ba16-903a2b96e691)
